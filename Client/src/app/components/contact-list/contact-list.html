<!-- Client/src/app/components/contact-list/contact-list.html -->
<div class="contact-list-container">
  <!-- search and filter component -->
  <app-search-filter
    [provinces]="provinces()"
    (filterChange)="onFilterChange($event)">
  </app-search-filter>

  <!-- results summary -->
  <div class="results-summary" *ngIf="!loading()">
    <span class="results-text">
      Showing {{ paginatedContacts().length }} of {{ filteredContacts().length }} contacts
      <span *ngIf="filteredContacts().length !== contacts().length">
        (filtered from {{ contacts().length }} total)
      </span>
    </span>
  </div>

  <div class="contacts-grid" *ngIf="!loading(); else loadingTemplate">
    <div class="no-results" *ngIf="filteredContacts().length === 0">
      <mat-icon class="no-results-icon">search_off</mat-icon>
      <h3>No contacts found</h3>
      <p>Try adjusting your search term or filter setting.</p>
    </div>

    <app-contact-card
      *ngFor="let contact of paginatedContacts()"
      [contact]="contact"
      (click)="openContactDetails(contact)"
      class="clickable-card">
    </app-contact-card>
  </div>

  <ng-template #loadingTemplate>
    <div class="loading-container">
      <mat-spinner></mat-spinner>
      <p>Loading contacts...</p>
    </div>
  </ng-template>

  <mat-paginator
    *ngIf="filteredContacts().length > 0"
    class="contact-paginator"
    [length]="filteredContacts().length"
    [pageSize]="pageSize()"
    [pageSizeOptions]="pageSizeOptions"
    [showFirstLastButtons]="true"
    (page)="onPageChange($event)"
    aria-label="Select page of contacts">

    <!-- Custom previous/next icons -->
    <mat-icon matPaginatorPrevious>chevron_left</mat-icon>
    <mat-icon matPaginatorNext>chevron_right</mat-icon>
  </mat-paginator>
</div>
